# GitHub Actions Workflows

This directory contains GitHub Actions workflows for the ngebut project.

## Workflows

### Unit Tests (`unit-tests.yml`)

This workflow runs unit tests on pull requests to the main branch and pushes to the main branch.

### Benchmark (`benchmark.yml`)

This workflow runs benchmarks on pull requests to the main branch and fails if any benchmark is more than 5% slower than the base branch.

#### How it works

1. It checks out both the PR code and the base branch code
2. It runs the benchmarks on both the base branch and the PR
3. It compares the benchmark results using benchstat
4. It analyzes the benchmark results and checks for regressions
5. It fails the workflow if any benchmark is more than 5% slower in the PR compared to the base branch
6. It uploads the benchmark results as artifacts for later examination

#### Artifacts

The workflow uploads the following artifacts:
- `base_results.txt`: Benchmark results from the base branch
- `pr_results.txt`: Benchmark results from the PR
- `comparison.md`: A comparison report generated by benchstat

#### Threshold

The threshold for failing the workflow is a 5% increase in the ns/op (nanoseconds per operation) metric. This threshold can be adjusted in the Go script in the workflow file.